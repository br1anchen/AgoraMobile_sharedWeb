'use strict';

describe('ActivityService',function(){

	var StorageService;
	var AppService;
	var $httpBackend;
	//test user info
	var testUser = {
      	screenName : "testUser",
      	id : "489185",
      	auth : "Basic dGVzdFVzZXI6ZGVtbw==",
      	companyId : "10132"
   	};

	beforeEach(module('app.activityService'));
	beforeEach(module('app.storageService'));

	beforeEach(inject(function($injector){

		StorageService = $injector.get('StorageService');
    	AppService = $injector.get('AppService');
		$httpBackend = $injector.get('$httpBackend');

		//Store all usefull info in local storage
    	StorageService.store('User',testUser);

		//Fetch with group Id and invalid auth token
        $httpBackend.whenGET(AppService.getBaseURL() + '/api/secure/jsonws/agora-activities-portlet.activities/get-fmt-group-activity2/uid/489185/gid/250926/from/0/to/10'
        	,function(headers){
        		return headers['Authorization'] != 'Basic dGVzdFVzZXI6ZGVtbw==' ? true :false;
        })
        .respond(function(){
        	return [401,
        	'{"exception":"Invalid authentication token"}',
        	{'WWW-Authenticate': 'Basic realm="PortalRealm"'}
        	]
        }); 

		//Fetch with group Id
        $httpBackend.whenGET(AppService.getBaseURL() + '/api/secure/jsonws/agora-activities-portlet.activities/get-fmt-group-activity2/uid/489185/gid/250926/from/0/to/10'
        	,function(headers){
        		return headers['Authorization'] == 'Basic dGVzdFVzZXI6ZGVtbw==' ? true :false;
        })
		.respond(function(){
			return[200,
				{"24903":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=345052\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=345001\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt\">filesApi.txt</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 2 timer siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1375089398512","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=345001","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"22918":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> replied to <a class=\"user\" href=\"\">Xiao Chen</a>'s message board post, <a href=\"/message_boards/find_message?messageId=327179\">RE: Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327179","date":"1374486643725","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"22919":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> replied to <a class=\"user\" href=\"\">Xiao Chen</a>'s message board post, <a href=\"/message_boards/find_message?messageId=327182\">RE: Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327182","date":"1374486689601","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"23353":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=331446\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=0\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10915&t=1375098605625","body":"<a class=\"user\" href=\"\">Armaz Mellati</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=0&title=Capture.PNG\">Capture.PNG</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 6 dager siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=0&title=Capture.PNG","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1374563037440","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=0","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Armaz Mellati"},"15411":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=257017\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=0\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Bjarne Holen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=0&title=login.sh\">login.sh</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 1 måned siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=0&title=login.sh","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1372065165184","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=0","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bjarne Holen"},"15351":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=256245\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=0\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=0&title=21_p4.jpg\">21_p4.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 1 måned siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=0&title=21_p4.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1371740983532","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=0","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"22912":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"11123":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=345052\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=345001\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt\">filesApi.txt</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 2 timer siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1375089398512","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=345001","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"11114":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=345052\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=345001\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt\">filesApi.txt</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 2 timer siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1375089398512","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=345001","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"11115":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=345052\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=345001\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt\">filesApi.txt</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 2 timer siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1375089398512","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=345001","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"}}
			]
		});

		

		//Fetch without group Id and invalid token
        $httpBackend.whenGET(AppService.getBaseURL() + '/api/secure/jsonws/agora-activities-portlet.activities/get-fmt-users-group-and-orgs-activity3/uid/489185/from/0/to/10'
        	,function(headers){
        		return headers['Authorization'] != 'Basic dGVzdFVzZXI6ZGVtbw==' ? true :false;
        })
        .respond(function(){
        	return [401,
        	'{"exception":"Invalid authentication token"}',
        	{'WWW-Authenticate': 'Basic realm="PortalRealm"'}
        	]
        }); 

		//Fetch without group Id
        $httpBackend.whenGET(AppService.getBaseURL() + '/api/secure/jsonws/agora-activities-portlet.activities/get-fmt-users-group-and-orgs-activity3/uid/489185/from/0/to/10'
        	,function(headers){
        		return headers['Authorization'] == 'Basic dGVzdFVzZXI6ZGVtbw==' ? true :false;
        })
		.respond(function(){
			return[200,
				{"14343":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=241818\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=10157&folderId=85194\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=10157&folderId=85194&title=Foodle2.jpg\">Foodle2.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=10157&folderId=85194&title=Foodle2.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1369396520877","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=10157&folderId=85194","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bernt Skjemstad"},"14342":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=241805\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=10157&folderId=85194\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=10157&folderId=85194&title=AdobeConnect2.jpg\">AdobeConnect2.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=10157&folderId=85194&title=AdobeConnect2.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1369396495953","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=10157&folderId=85194","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bernt Skjemstad"},"14341":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=241779\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=10157&folderId=85194\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=10157&folderId=85194&title=phoneconference2.jpg\">phoneconference2.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=10157&folderId=85194&title=phoneconference2.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1369396414944","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=10157&folderId=85194","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bernt Skjemstad"},"24903":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=345052\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=345001\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt\">filesApi.txt</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 2 timer siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1375089398512","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=345001","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"22918":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> replied to <a class=\"user\" href=\"\">Xiao Chen</a>'s message board post, <a href=\"/message_boards/find_message?messageId=327179\">RE: Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327179","date":"1374486643725","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"22919":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> replied to <a class=\"user\" href=\"\">Xiao Chen</a>'s message board post, <a href=\"/message_boards/find_message?messageId=327182\">RE: Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327182","date":"1374486689601","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"23353":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=331446\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=0\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10915&t=1375098605625","body":"<a class=\"user\" href=\"\">Armaz Mellati</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=0&title=Capture.PNG\">Capture.PNG</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 6 dager siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=0&title=Capture.PNG","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1374563037440","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=0","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Armaz Mellati"},"15411":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=257017\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=0\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Bjarne Holen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=0&title=login.sh\">login.sh</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 1 måned siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=0&title=login.sh","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1372065165184","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=0","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bjarne Holen"},"15351":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=256245\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=0\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=0&title=21_p4.jpg\">21_p4.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 1 måned siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=0&title=21_p4.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1371740983532","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=0","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"22912":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"}}
			]
		});









		//Fetch with group Id and invalid auth token
        $httpBackend.whenGET(AppService.getBaseURL() + '/api/secure/jsonws/agora-activities-portlet.activities/get-fmt-group-activity2/uid/489185/gid/250926/from/0/to/20'
        	,function(headers){
        		return headers['Authorization'] != 'Basic dGVzdFVzZXI6ZGVtbw==' ? true :false;
        })
        .respond(function(){
        	return [401,
        	'{"exception":"Invalid authentication token"}',
        	{'WWW-Authenticate': 'Basic realm="PortalRealm"'}
        	]
        }); 

		//Fetch with group Id
        $httpBackend.whenGET(AppService.getBaseURL() + '/api/secure/jsonws/agora-activities-portlet.activities/get-fmt-group-activity2/uid/489185/gid/250926/from/0/to/20'
        	,function(headers){
        		return headers['Authorization'] == 'Basic dGVzdFVzZXI6ZGVtbw==' ? true :false;
        })
		.respond(function(){
			return[200,
				{"24903":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=345052\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=345001\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt\">filesApi.txt</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 2 timer siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1375089398512","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=345001","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"22918":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> replied to <a class=\"user\" href=\"\">Xiao Chen</a>'s message board post, <a href=\"/message_boards/find_message?messageId=327179\">RE: Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327179","date":"1374486643725","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"22919":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> replied to <a class=\"user\" href=\"\">Xiao Chen</a>'s message board post, <a href=\"/message_boards/find_message?messageId=327182\">RE: Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327182","date":"1374486689601","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"23353":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=331446\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=0\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10915&t=1375098605625","body":"<a class=\"user\" href=\"\">Armaz Mellati</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=0&title=Capture.PNG\">Capture.PNG</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 6 dager siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=0&title=Capture.PNG","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1374563037440","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=0","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Armaz Mellati"},"15411":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=257017\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=0\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Bjarne Holen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=0&title=login.sh\">login.sh</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 1 måned siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=0&title=login.sh","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1372065165184","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=0","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bjarne Holen"},"15351":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=256245\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=0\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=0&title=21_p4.jpg\">21_p4.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 1 måned siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=0&title=21_p4.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1371740983532","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=0","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"22912":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"11123":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=345052\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=345001\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt\">filesApi.txt</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 2 timer siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1375089398512","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=345001","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"11114":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=345052\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=345001\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt\">filesApi.txt</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 2 timer siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1375089398512","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=345001","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"11115":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=345052\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=345001\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt\">filesApi.txt</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 2 timer siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1375089398512","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=345001","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"22222":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"22223":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"22224":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"22225":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"22226":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"22227":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"22228":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"22229":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"22230":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"22232":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},}
			]
		});

		//Fetch without group Id and invalid token
        $httpBackend.whenGET(AppService.getBaseURL() + '/api/secure/jsonws/agora-activities-portlet.activities/get-fmt-users-group-and-orgs-activity3/uid/489185/from/0/to/20'
        	,function(headers){
        		return headers['Authorization'] != 'Basic dGVzdFVzZXI6ZGVtbw==' ? true :false;
        })
        .respond(function(){
        	return [401,
        	'{"exception":"Invalid authentication token"}',
        	{'WWW-Authenticate': 'Basic realm="PortalRealm"'}
        	]
        }); 

		//Fetch without group Id
        $httpBackend.whenGET(AppService.getBaseURL() + '/api/secure/jsonws/agora-activities-portlet.activities/get-fmt-users-group-and-orgs-activity3/uid/489185/from/0/to/20'
        	,function(headers){
        		return headers['Authorization'] == 'Basic dGVzdFVzZXI6ZGVtbw==' ? true :false;
        })
		.respond(function(){
			return[200,
				{"14323":{"extraBody":"","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> updated a wiki page, <a href=\"/wiki/find_page?pageResourcePrimKey=241201\">Agora på iPad</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"","WikiPage_title":"Agora på iPad","WikiPage_nodeid":"10758","MBMessage_messageId":"","date":"1369381022369","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.wiki.model.WikiPage","user":"Bernt Skjemstad"},"22918":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> replied to <a class=\"user\" href=\"\">Xiao Chen</a>'s message board post, <a href=\"/message_boards/find_message?messageId=327179\">RE: Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327179","date":"1374486643725","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"22919":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> replied to <a class=\"user\" href=\"\">Xiao Chen</a>'s message board post, <a href=\"/message_boards/find_message?messageId=327182\">RE: Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327182","date":"1374486689601","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"15411":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=257017\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=0\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Bjarne Holen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=0&title=login.sh\">login.sh</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 1 måned siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=0&title=login.sh","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1372065165184","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=0","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bjarne Holen"},"14335":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=241608\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=10157&folderId=85194\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=10157&folderId=85194&title=FileSender.jpg\">FileSender.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=10157&folderId=85194&title=FileSender.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1369388438648","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=10157&folderId=85194","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bernt Skjemstad"},"22912":{"extraBody":"<a href=\"/message_boards/find_category?mbCategoryId=327120\">Gå til kategori</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> wrote a new message board post, <a href=\"/message_boards/find_message?messageId=327122\">Test for bug</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 7 dager siden","DLFileEntry_filelink":"","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"327122","date":"1374486225734","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.messageboards.model.MBMessage","user":"Xiao Chen"},"14339":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=241740\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=10157&folderId=85194\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=10157&folderId=85194&title=FileSender_.jpg\">FileSender_.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=10157&folderId=85194&title=FileSender_.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1369395891940","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=10157&folderId=85194","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bernt Skjemstad"},"14338":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=241647\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=10157&folderId=85194\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=10157&folderId=85194&title=Foodle.jpg\">Foodle.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=10157&folderId=85194&title=Foodle.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1369389288717","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=10157&folderId=85194","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bernt Skjemstad"},"14337":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=241634\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=10157&folderId=85194\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=10157&folderId=85194&title=AdobeConnect.jpg\">AdobeConnect.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=10157&folderId=85194&title=AdobeConnect.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1369388950027","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=10157&folderId=85194","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bernt Skjemstad"},"14336":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=241621\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=10157&folderId=85194\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=10157&folderId=85194&title=phoneconference.jpg\">phoneconference.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=10157&folderId=85194&title=phoneconference.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1369388730805","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=10157&folderId=85194","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bernt Skjemstad"},"14343":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=241818\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=10157&folderId=85194\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=10157&folderId=85194&title=Foodle2.jpg\">Foodle2.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=10157&folderId=85194&title=Foodle2.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1369396520877","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=10157&folderId=85194","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bernt Skjemstad"},"14342":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=241805\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=10157&folderId=85194\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=10157&folderId=85194&title=AdobeConnect2.jpg\">AdobeConnect2.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=10157&folderId=85194&title=AdobeConnect2.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1369396495953","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=10157&folderId=85194","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bernt Skjemstad"},"14341":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=241779\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=10157&folderId=85194\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=10157&folderId=85194&title=phoneconference2.jpg\">phoneconference2.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=10157&folderId=85194&title=phoneconference2.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1369396414944","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=10157&folderId=85194","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bernt Skjemstad"},"24903":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=345052\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=345001\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt\">filesApi.txt</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 2 timer siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1375089398512","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=345001","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"14340":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=241764\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=10157&folderId=85194\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=10157&folderId=85194&title=FileSender2.jpg\">FileSender2.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=10157&folderId=85194&title=FileSender2.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1369396201549","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=10157&folderId=85194","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Bernt Skjemstad"},"14314":{"extraBody":"","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> wrote a new wiki page, <a href=\"/wiki/find_page?pageResourcePrimKey=241236\">Agora for første gang</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"","WikiPage_title":"Agora for første gang","WikiPage_nodeid":"10758","MBMessage_messageId":"","date":"1369312343277","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.wiki.model.WikiPage","user":"Bernt Skjemstad"},"14315":{"extraBody":"","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> updated a wiki page, <a href=\"/wiki/find_page?pageResourcePrimKey=241236\">Agora for første gang</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"","WikiPage_title":"Agora for første gang","WikiPage_nodeid":"10758","MBMessage_messageId":"","date":"1369312378008","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.wiki.model.WikiPage","user":"Bernt Skjemstad"},"23353":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=331446\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=0\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=10915&t=1375098605625","body":"<a class=\"user\" href=\"\">Armaz Mellati</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=0&title=Capture.PNG\">Capture.PNG</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 6 dager siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=0&title=Capture.PNG","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1374563037440","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=0","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Armaz Mellati"},"14313":{"extraBody":"","pict":"/user_male_portrait?img_id=10938&t=1375098605744","body":"<a class=\"user\" href=\"\">Bernt Skjemstad</a> updated a wiki page, <a href=\"/wiki/find_page?pageResourcePrimKey=241201\">Agora på iPad</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=10157&privateLayout=0\">Agora</a>.","humanTimeStamp":"for 2 måneder siden","DLFileEntry_filelink":"","WikiPage_title":"Agora på iPad","WikiPage_nodeid":"10758","MBMessage_messageId":"","date":"1369309636894","DLFileEntry_folderlink":"","ClassName":"com.liferay.portlet.wiki.model.WikiPage","user":"Bernt Skjemstad"},"15351":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=256245\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=0\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=0&title=21_p4.jpg\">21_p4.jpg</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 1 måned siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=0&title=21_p4.jpg","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1371740983532","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=0","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"11111":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=345052\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=345001\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt\">filesApi.txt</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 2 timer siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1375089398512","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=345001","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"11112":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=345052\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=345001\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt\">filesApi.txt</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 2 timer siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1375089398512","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=345001","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"},"11113":{"extraBody":"<a href=\"/document_library/find_file_entry?fileEntryId=345052\">Vis dokument</a> <a href=\"/document_library/find_folder?groupId=250926&folderId=345001\">Gå til mappe</a>","pict":"/user_male_portrait?img_id=0&t=1375098605607","body":"<a class=\"user\" href=\"\">Xiao Chen</a> uploaded a new document, <a href=\"/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt\">filesApi.txt</a>, in <a class=\"group\" href=\"/my_sites/view?groupId=250926&privateLayout=1\">Agora App</a>.","humanTimeStamp":"for 2 timer siden","DLFileEntry_filelink":"/c/document_library/get_file?groupId=250926&folderId=345001&title=filesApi.txt","WikiPage_title":"","WikiPage_nodeid":"","MBMessage_messageId":"","date":"1375089398512","DLFileEntry_folderlink":"/c/document_library/find_folder?groupId=250926&folderId=345001","ClassName":"com.liferay.portlet.documentlibrary.model.DLFileEntry","user":"Xiao Chen"}}
			]
		});




	}));

	afterEach(function() {
	  	$httpBackend.verifyNoOutstandingExpectation();
	  	$httpBackend.verifyNoOutstandingRequest();

        StorageService.clear();
	});

	it('Testing getActivities',inject(function(ActivityService){

		var activitiesHolder;
		var group = {id: 250926, name: "TestGruppe1", type: 2, site: true};

		var promise = ActivityService.getActivities(group);

		promise.then(function(holder){
			activitiesHolder = holder;
		});

		$httpBackend.flush();
		expect(activitiesHolder.activities.length).toBe(10);
	}));

	it('Testing getMoreActivities',inject(function(ActivityService){

        var activitiesHolder;
        var group = {id: 250926, name: "TestGruppe1", type: 2, site: true};

        var promise = ActivityService.getActivities(group);

        promise.then(function(holder){
            activitiesHolder = holder;
        });

        $httpBackend.flush();
        expect(activitiesHolder.activities.length).toBe(10);


        //Calling getMoreActivities to see if object is updated
        ActivityService.getMoreActivities(group);
        $httpBackend.flush();
        expect(activitiesHolder.activities.length).toBe(20);
    }));

    it('Testing updateActivities',inject(function(ActivityService){

        var activitiesHolder;
        var group = {id: 250926, name: "TestGruppe1", type: 2, site: true};

        var promise = ActivityService.updateActivities(group);

        promise.then(function(holder){
            activitiesHolder = holder;
        });

        $httpBackend.flush();
        expect(activitiesHolder.activities.length).toBe(10);
    }));

    //For this test to work you need to remove the updateActivities() call in ActicityService executed when activities are fetched from the local storage

    // it('Testing storage',inject(function(ActivityService){

    //     var activitiesHolder;
    //     var group = {id: 250926, name: "TestGruppe1", type: 2, site: true};

    //     var promise = ActivityService.getActivities(group);

    //     promise.then(function(holder){
    //         activitiesHolder = holder;
    //     });
    //     $httpBackend.flush();
    //     expect(activitiesHolder.activities.length).toBe(10);

    //     activitiesHolder.activities = [];
    //     activitiesHolder.groupId = undefined;
    //     var promise = ActivityService.getActivities(group).then(function(){
    //         expect(activitiesHolder.activities.length).toBe(10);
    //     })

    // }));

});